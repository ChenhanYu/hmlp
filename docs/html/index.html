<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>HMLP: High-performance Machine Learning Primitives: HMLP (High Performance Machine Learning Primitives)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HMLP: High-performance Machine Learning Primitives
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">HMLP (High Performance Machine Learning Primitives) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h3>WARNING</h3>
<p><a href="https://chenhanyu.github.io/hmlp/">HMLP</a> and GOFMM are research projects and not in production. For SC'17 and SC'18 artifacts, see /artifact and our our GOFMM papers [SC'17 and SC'18] for details.</p>
<h3>README</h3>
<p>Thank you for deciding to give <a href="https://chenhanyu.github.io/hmlp/">HMLP</a> a try! This code can be used directly or pluged into many learning tasks such as kernel summation, nearest neighbor search, k-means clustering, convolution networks. It is also possible to create a specific general N-body operator by using our template frameworks.</p>
<p>See <a href="https://github.com/ChenhanYu/hmlp#install">INSTALL</a> on how to install it. Checkout <a href="https://github.com/ChenhanYu/hmlp#license">LICENSE</a> if you want to use or redistribute any part of HMLP. Notice that different parts of HMLP may have different licenses. We usually annotate the specific license on the top of the file.</p>
<p>HMLP (High Performance Machine Learning Primitives) is a portable framework that provides high performance, memory efficient matrix-matrix multiplication like operations and their extension based on the BLIS framework. Currently, HMLP has implementations on Intel x86_64, Knights Landing, ARM and NVIDIA GPU. We may further support other architectures in the future.</p>
<p>Depending on your need, you may only require the basic features if you just want to use some existing primitives. Acoording to the feature you require we suggest that you read different part of documents. Please checkout the wiki pages at:</p>
<p><a href="https:://github.com/ChenhanYu/hmlp/wiki">WIKI PAGE</a></p>
<p>to see what feature better suit your need.</p>
<p>Architecture dependent implementations (a.k.a microkernels or kernels in short) are identified and saperated from the c++ loop base framework. Thus, porting any HMLP primitive to an new architecture <b>only require</b> rewriting the kernel part. You are welcome to contribute more kernels beyond this list. Checkout the guildline on implementing microkernel for HMLP at our wiki pages.</p>
<h3>DOCUMENTATION</h3>
<p>GOFMM, MPI-GOFMM, HMLP templates, and HMLP runtime APIs are documented by doxygen:</p><ul>
<li><a href="https://chenhanyu.github.io/hmlp/docs/html">https://chenhanyu.github.io/hmlp/docs/html</a></li>
</ul>
<h2>INSTALL</h2>
<p>HMLP is tested on LINUX and OSX. Compilation <b>REQUIRES:</b></p><ul>
<li>Intel or GNU compilers with c++11, AVX and OpenMP support (for x86_64);</li>
<li>Arm GNU compilers (see [Cross Compilation]() for details on compilation on Android) with OpenMP support (for arm);</li>
<li>Intel-16 or later compilers (for Intel MIC, KNL);</li>
<li>nvcc (for NVIDIA GPU with capability &gt; 2.0).</li>
</ul>
<h3>Configuration</h3>
<p>Edit set_env.sh for compilation options.</p>
<p>You MUST manually setup each environment variable in the **"REQUIRED" CONGIFURATION** if any of those variables were not defined properly on you system.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;export CC             = icc    to use Intel C compilers</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;export CXX            = icpc   to use Intel C++ compilers</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;export CC             = gcc    to use GNU C compilers</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;export CXX            = g++    to use GNU C++ compilers</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;export HMLP_USE_BLAS  = false  if you don&#39;t have a BLAS library.</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;export MKLROOT        = xxx    to_the_path_of_intel_mkl</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;export OPENBLASROOT   = xxx    to_the_path_of_OpenBLAS</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;set HMLP_USE_CUDA     = true   to compile code with cuda templates. </div></div><!-- fragment --><p>The default BLAS library for Intel compiler is MKL. For GNU compilers, cmake will try to find a proper BLAS/LAPACK library on you system. If cmake fails to locate BLAS/LAPACK, then the compilation will fail as well. You need to manually setup the path in the cmake file.</p>
<h3>Cmake installation</h3>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;source set_env.sh</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;mkdir build</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;cd build</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;cmake ..</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;make</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;make install</div></div><!-- fragment --><h3>Cross Compilation</h3>
<p>If your Arm is run with OS that has native compiler and cmake support, then the installation instruction above should work just fine. However, while your target runs an Android OS, which currently does not have a native C/C++ compiler, you will need to cross compile HMLP on your Linux or OSX first. Although there are many ways to do cross compilation, we suggest that users follow these instructions:</p>
<ol type="1">
<li>Install Android Studio with LLDB, cmake and NDK support.</li>
<li>Create stand-alone-toolchain from NDK.</li>
<li>Install adb (Android Debug Bridge)</li>
<li>Compile HMLP with cmake. It will look for your arm gcc/g++, ar and ranlib support.</li>
<li>Use the following instructions to push executables and scripts in hmlp/build/bin.</li>
</ol>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;adb devices</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;adb push /hmlp/build/bin/* /data/local/tmp</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;adb shell</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;cd /data/local/tmp</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;./run_hmlp.sh</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;./run_gkmx.sh</div></div><!-- fragment --><h3>EXAMPLE</h3>
<p>The default compilation will also compile all the examples in /example. To run some basic examples from the testing drivers:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd /build</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;./run_hmlp.sh</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;./run_gkmx.sh</div></div><!-- fragment --><p>To us <a href="https://chenhanyu.github.io/hmlp/">HMLP</a> library you need to include the header files &lt;<a class="el" href="hmlp_8h_source.html">hmlp.h</a>&gt; and link ${HMLP_DIR}/build/libhmlp.a statically or ${HMLP_DIR}/build/libhmlp.so (or .dylib) dynamically.</p>
<p>C/C++ example:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{c++}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;...</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;#include &lt;hmlp.h&gt;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;...</div></div><!-- fragment --><p>Static linking example: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;icc ... -I$(HMLP_DIR)/build/include $(HMLP_DIR)/build/libhmlp.a</div></div><!-- fragment --><p>Dynamic linking example on Linux: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;icc ... -I$(HMLP_DIR)/build/include -L$(HMLP_DIR)/build/libhmlp.so</div></div><!-- fragment --><p>Dynamic linking example on Mac: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;icc ... -I$(HMLP_DIR)/build/include -L$(HMLP_DIR)/build/libhmlp.dylib</div></div><!-- fragment --><h3>TESTING</h3>
<p>Following the steps in <a href="https://github.com/ChenhanYu/hmlp#install">INSTALL</a> using cmake, Google Test will be downloaded and compiled. All testing routines located in /test will be compiled. All executables locate in /build. To perform the whole test suits, follow these instructions. </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd build</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;make test</div></div><!-- fragment --><p> Optionally, you can perform and coverage analysis and update the report by </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;make coverage</div></div><!-- fragment --><p>The latest coverage report can be found at</p><ul>
<li><a href="https://chenhanyu.github.io/hmlp/docs/html/coverage.html">https://chenhanyu.github.io/hmlp/docs/html/coverage.html</a></li>
<li><a href="https://chenhanyu.github.io/hmlp/docs/html/coverage_details.html">https://chenhanyu.github.io/hmlp/docs/html/coverage_details.html</a></li>
</ul>
<p>## ACKNOWLEDGEMENTS </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;The HMLP library was primarily authored by</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  Chenhan D. Yu             (The University of Texas at Austin)</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;but many others have contributed input and feedback. Contributors</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;are listed acoording to the part they contribute to:</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;  GOFMM (Geometry-Oblivious FMM) in SC&#39;17</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;  James Levitt              (The University of Texas at Austin)</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;  Severin Reiz              (Technische Universität München)</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;  George Biros              (The University of Texas at Austin)</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;  General Stride K-Nearest Neighbors in SC&#39;15</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;  Jianyu Huang              (The University of Texas at Austin)</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;  Woody Austin              (The University of Texas at Austin)</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;  George Biros              (The University of Texas at Austin)</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;  General Stride Kernel Summation in IPDPS&#39;15</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  Bill March                (The University of Texas at Austin)</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  George Biros              (The University of Texas at Austin)</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  2-level Strassen in SC&#39;16</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  Jianyu Huang              (The University of Texas at Austin)</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  Leslie Rice               (The University of Texas at Austin)</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  HMLP on Arm</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  Jianyu Huang              (The University of Texas at Austin)</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  Matthew Badin             (Qualcomm Corp. Santa Clara)</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  BLIS framework support</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  Tyler Smith               (The University of Texas at Austin)</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  Robert van de Geijn       (The University of Texas at Austin)</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  Field Van Zee             (The University of Texas at Austin)</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;The gratitude especially goes to the following individual who walks</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;me through the whole BLIS framework.</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  Field Van Zee             (The University of Texas at Austin)</div></div><!-- fragment --><p>Thank you again for being intersted in HMLP!</p>
<p>Best regards,</p>
<p>Chenhan D. Yu &mdash; <a href="#" onclick="location.href='mai'+'lto:'+'che'+'nh'+'an@'+'cs'+'.ut'+'ex'+'as.'+'ed'+'u'; return false;">chenh<span style="display: none;">.nosp@m.</span>an@c<span style="display: none;">.nosp@m.</span>s.ute<span style="display: none;">.nosp@m.</span>xas.<span style="display: none;">.nosp@m.</span>edu</a> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
